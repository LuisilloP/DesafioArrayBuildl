const E=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function e(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerpolicy&&(a.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?a.credentials="include":n.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(n){if(n.ep)return;n.ep=!0;const a=e(n);fetch(n.href,a)}};E();const w=document.querySelector(".boton-svg"),q=document.querySelector(".nav"),f=document.querySelector(".btn-carrito"),J=document.querySelector(".btn-cierra-carrito"),v=document.querySelector(".fondo-carrito");w.addEventListener("click",()=>{q.classList.toggle("active")});f.addEventListener("click",()=>{v.classList.add("transition"),v.classList.toggle("active"),f.classList.add("desactivoBtnCarrito")});J.addEventListener("click",()=>{v.classList.remove("active"),f.classList.remove("desactivoBtnCarrito")});window.addEventListener("scroll",()=>{document.querySelector("header").classList.toggle("sigue",window.scrollY>0)});class l{constructor(t,e,r,n,a,d){this.id=t,this.nombre=e,this.img=r,this.precio=n,this.plataforma=a,this.stock=d}descontarStock(t){return this.stock<=0?"Agotado":this.stock=this.stock-t}}const i=["PS4","Nintendo Switch","Xbox"],I=[new l(0,"God of War","./Img/ps4/godJuego.jpg",5e4,i[0],100),new l(1,"GTA V","./Img/ps4/gtaJuego.jpg",4e4,i[0],200),new l(2,"Uncharted","./Img/ps4/unchar.png",3e4,i[0],100),new l(3,"Dragon Ball kakarot","./Img/ps4/dbzJuego.jpg",3e4,i[0],100)],x=[new l(4,"Super Mario Odyssey","./Img/nintendoSwitch/marioO.jpg",1e4,i[1],100),new l(5,"Super Smash Ultimate","./Img/nintendoSwitch/superSmash.jpg",7e4,i[1],100),new l(6,"Pokemon let's Go Pikachu","./Img/nintendoSwitch/pokemonPika.jpg",15e3,i[1],200),new l(7,"Zelda Breath of the wild","./Img/nintendoSwitch/zelda.jpg",5e4,i[1],100)],A=[new l(8,"Halo 5","./Img/xbox/xbox.jpg",35e3,i[2],200),new l(9,"Minecraft","./Img/xbox/minecraft.jpg",2e4,i[2],100)];let u=x.concat(...I,...A);class ${constructor(t,e,r,n,a){this.id=t,this.nombre=e,this.precio=r,this.cantidad=n,this.img=a}multiplicarPrecio(t){return this.precio*t}sumaUnidad(t){this.cantidad=this.cantidad+t}}let s=[],g=[],p=[];const h=document.querySelector("#inputNombre");function M(){m(s);let o=document.querySelectorAll(".radio-filter .boxRadio .radio-class");const t=document.querySelectorAll(".radio-class");for(let e=0;e<t.length;e++)t[e].addEventListener("click",()=>{t[e].checked?(o[e].classList.add("Check"),g.push(o[e].value)):(o[e].classList.remove("Check"),g=g.filter(r=>!r.includes(o[e].value))),C(g,0,h.value)})}h.addEventListener("input",o=>{if(h.value)C([],0,h.value);else{let t=document.querySelectorAll(".radio-filter .boxRadio .radio-class");for(let e=0;e<i.length;e++)t[e].disabled=!1;m(u)}});const C=(o=[],t=0,e="")=>{if(!o.length==0||!t==0||!e.length==0)if(!o.length==0&&!t==0&&!e==0)console.log("Estan todos los datos a buscar con su tipo");else if(e.length>0)s=u.filter(r=>r.nombre.toLowerCase().includes(e.toLowerCase().trim())),p=s.map(r=>r.plataforma),p=[...new Set(p)],P(p);else{let r=[];o.forEach(n=>{r=u.filter(a=>a.plataforma.includes(n))}),s=s.concat(r)}else console.log("no estas buscando nada");m(s)},P=o=>{document.querySelectorAll(".radio-class");let t=document.querySelectorAll(".radio-filter .boxRadio .radio-class"),e=B(i,o);for(let r=0;r<i.length;r++){t[r].disabled=!1;for(let n=0;n<e.length;n++)t[r].value==e[n]&&(console.log("eliminamos"),t[r].disabled=!0)}console.log(e)},B=(o,t)=>o.sort().filter(e=>!t.sort().includes(e));let c=[];const b=o=>{const t=document.querySelector("#contenedorJuegos");return o.forEach(e=>{let r=`
        <img src="${e.img}" class="img">
        <p class="nombreJuego">${e.nombre}</p>
        <div class="txtContenedor">
          <div class ="content">
            <p>Precio</p> <p class="precios" >${e.precio}</p>
          </div>
          <div class="content"> 
            <p>Stock </p><p class="stock">${e.stock}</p>
          </div>
       </div>
       <div class="id"><input type ="hidden" value =${e.id}></div>
        `;var n=document.createElement("div");n.setAttribute("class","contenedorJuego"),n.innerHTML=r,t.appendChild(n)}),o};function S(){const o=document.querySelectorAll(".contenedorJuego");for(let t=0;t<o.length;t++)o[t].addEventListener("dblclick",function(){u.forEach(r=>{if(r.id==o[t].querySelector(".id input ").value){let n=new $(r.id,r.nombre,r.precio,1,r.img),a=c.find(d=>d.id==n.id);O(a,n)}});let e=JSON.stringify(c);localStorage.setItem("carrito",e)})}const O=(o,t)=>{let e=document.querySelectorAll(".cantidad-carritoMod"),r=document.querySelectorAll(".id-carrito input");if(!o)console.log("no se encuentra el dato lo agregare"),c.push(t),L(t),k();else{console.log("Solo agregare la cantidad");for(let n=0;n<c.length;n++)t.id==r[n].value&&(c[n].cantidad=c[n].cantidad+1,e[n].innerHTML=parseInt(e[n].innerHTML)+1,console.log(c[n].cantidad))}},m=o=>{o.length==0?(y(),o=b(u),S()):(y(),b(o),S())};m(s);const R=document.getElementById("botonComprar");R.addEventListener("click",()=>{c.length==0?alert("no hay nada en carro"):(N(),m(s),alert("no se eliminara el carrito local actual "))});const N=()=>{let o="",t=0;c.forEach(e=>{o+=`Juego: ${e.nombre} Precio: $${e.precio} X ${e.cantidad}
`,t+=e.precio*e.cantidad,u.find(r=>{r.id==e.id&&(r.stock=r.stock-e.cantidad)}),console.log(u[e.id].stock)}),o+=`
 Su total es de $${t} gracias por su compra`,alert(o)},H=o=>{let t=document.querySelector(".radio-filter");o.forEach(e=>{const r=document.createElement("DIV"),n=document.createElement("input"),a=document.createElement("label");n.type="checkbox",r.classList.add("boxRadio"),n.classList.add("radio-class"),n.value=e,a.textContent=e,r.appendChild(n),r.appendChild(a),t.appendChild(r)})};H(i);M();function y(){let o=document.querySelector(".contenedorJuegos"),t=o.lastElementChild;for(;t;)o.removeChild(t),t=o.lastElementChild}const T=()=>{const o=localStorage.getItem("carrito"),t=JSON.parse(o);t===null?console.log("no hay nada en almacenamiento local"):(c.push(...t),c.forEach(e=>{L(e)}))};T();function L(o){const t=document.querySelector(".tbody-carrito");let e=`
    <td><img class="img-min-carrito" src="${o.img}"></td>
      <td>${o.nombre}</td>
      <td class="cantidad-carritoMod">${o.cantidad}</td>
      <td>${o.precio}</td>
      <td ><a class ="EliminaJuegoCarrito" >Eliminar</a></td>
      <div class="id-carrito"><input type ="hidden" value =${o.id}></div>
      `;const r=document.createElement("tr");r.classList.add("JuegoCarrito"),r.innerHTML=e,t.appendChild(r)}const k=()=>{const o=document.querySelectorAll(".EliminaJuegoCarrito");let t=document.querySelectorAll(".JuegoCarrito");for(let e=0;e<o.length;e++)o[e].addEventListener("click",()=>{t[e].remove(),c=c.filter(r=>!r.id.toString().includes(t[e].querySelector(".id-carrito input").value))})};k();window.addEventListener("DOMContentLoaded",o=>{});
